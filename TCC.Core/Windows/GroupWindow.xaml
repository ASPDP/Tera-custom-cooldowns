<local:TccWindow x:Class="TCC.Windows.GroupWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:local="clr-namespace:TCC.Windows"
                 xmlns:wm="clr-namespace:TCC.ViewModels"
                 xmlns:controls="clr-namespace:TCC.Controls"
                 xmlns:converters="clr-namespace:TCC.Converters"
                 xmlns:data="clr-namespace:TCC.Data"
                 mc:Ignorable="d"
                 WindowStyle="None"
                 AllowsTransparency="True"
                 ResizeMode="NoResize"
                 Topmost="True"
                 SizeToContent="WidthAndHeight"
                 Background="Transparent"
                 Title="GroupWindow" Height="Auto" Width="Auto"
                 Loaded="TccWindow_Loaded" 
                 MouseLeftButtonDown="Window_MouseLeftButtonDown" 
                 PreviewMouseRightButtonDown="TccWindow_PreviewMouseRightButtonDown"
                 ShowInTaskbar="False" UseLayoutRounding="True"
                 >
    <local:TccWindow.DataContext>
        <wm:GroupWindowViewModel/>
    </local:TccWindow.DataContext>
    <local:TccWindow.Resources>

    </local:TccWindow.Resources>
    <Grid  Margin="5" Width="Auto" >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.LayoutTransform>
            <ScaleTransform ScaleX="{Binding Scale}" ScaleY="{Binding Scale}" />
        </Grid.LayoutTransform>
        <Border Style="{StaticResource Styles.DefaultBorder}" Grid.Row="1" 
                Grid.ColumnSpan="1" Grid.Column="3"  Margin="4,2" 
                Width="Auto" VerticalAlignment="Top" HorizontalAlignment="Left"
                Padding="3,0,3,1" Visibility="{Binding Instance.Formed, Converter={StaticResource Converters.BoolToVisibleCollapsed}}">
            <TextBlock Foreground="White" FontSize="12">
                <Run Text="Group size: "></Run>
                <Run Text="{Binding Instance.GroupSize, Mode=OneWay}"/>
                <Run Text=" (" />
                <Run Text="{Binding Instance.DpsCount, Mode=OneWay}" Foreground="{StaticResource Colors.GroupWindow.Dps}"/>
                <Run Text="⋅" />
                <Run Text="{Binding Instance.HealersCount, Mode=OneWay}" Foreground="{StaticResource Colors.GroupWindow.Healer}"/>
                <Run Text="⋅" />
                <Run Text="{Binding Instance.TanksCount, Mode=OneWay}" Foreground="{StaticResource Colors.GroupWindow.Tank}"/>
                <Run Text=")" />

            </TextBlock>
        </Border>
        <ItemsControl x:Name="dps"  Width="Auto" 
                      ItemsSource="{Binding Instance.Dps}" 
                      ItemTemplate="{Binding Instance.GroupSize, Converter={StaticResource Converters.GroupSizeToTemplate}}" 
                      Grid.Row="1">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Vertical" MaxHeight="500" Width="Auto" Name="dpsPanel"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
        <ItemsControl x:Name="healers"  Grid.Column="1" 
                      ItemTemplate="{Binding Instance.GroupSize, Converter={StaticResource Converters.GroupSizeToTemplate}}" 
                      ItemsSource="{Binding Instance.Healers}" Grid.Row="1">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Vertical" MaxHeight="500" Width="Auto" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
        <ItemsControl x:Name="tanks"  Grid.Column="2" 
                      ItemTemplate="{Binding Instance.GroupSize, Converter={StaticResource Converters.GroupSizeToTemplate}}" 
                      ItemsSource="{Binding Instance.Tanks}" Grid.Row="1">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Vertical" MaxHeight="500" Width="Auto" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </Grid>
</local:TccWindow>
